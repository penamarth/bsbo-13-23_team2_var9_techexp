@startuml

actor Соискатель
participant System
participant ApplicationList
participant Application

Соискатель -> System: withdrawApplication(appId)
activate System
System -> ApplicationList: findApplication(appId)
activate ApplicationList
ApplicationList -> Application: getStatus(Application)
activate Application
Application -> System: Status
deactivate Application

alt Заявка может быть отозвана
	System -> ApplicationList: DeleteApplication(Application)
	ApplicationList -> ApplicationList: Delete(Application)
	ApplicationList -> System: Status
	deactivate ApplicationList
	System -> Соискатель: withdrawConfirmation(appId)
else Заявка не может быть отозвана
	System -> Соискатель: withdrawRejected(reason)
	deactivate System
end

Соискатель -> System: changeApplication(appId, data)
activate System
System -> ApplicationList: findApplication(appId)
activate ApplicationList
ApplicationList -> Application: getStatus(Application)
activate Application
Application -> System: Status

alt Заявка может быть отредактирована
	System -> Application: editApplication(Application)
	Application -> Application: Edit(Application, data)
	Application -> System: Status
	deactivate Application
	deactivate ApplicationList
	System -> Соискатель: changeConfirmation(appId)
else Заявка не может быть отредактирована
	System -> Соискатель: changeRejected(reason)
	deactivate System
end

@enduml
