Рамки. Система управления грантами GrantSystem.

Уровень. Задача, определенная пользователем.

Основной исполнитель. Соискатель.

Заинтересованные лица и их требования.

- Соискатель. Хочет легко и быстро подать заявку на грант. Хочет быть уверенным, что заявка корректно сохранена и будет рассмотрена.
- Эксперты. Хотят получать заявки, соответствующие их специализации, для качественной оценки.
- Держатель фонда. Хочет иметь полный архив поданных заявок для последующего принятия решений.
- Система. Хочет обеспечить целостность данных и корректный жизненный цикл заявок.

Предусловия.

- Соискатель идентифицирован и аутентифицирован.

Результаты (Постусловия).

- Данные о заявке сохранены.
- Статус заявки изменен на "Подана".
- Заявка добавлена в архив системы.
- Выполнено логирование операции.
- Заявка готова к процессу оценки

Основной успешный сценарий

1. Соискатель предоставляет данные для заявки (ApplicationData).
2. Система вызывает операцию ArchiveApplication сервиса GrantSystemService.
3. Сервис делегирует создание заявки объекту Applicant через PrepareApplication.
4. Applicant создает новый экземпляр Application.
5. Applicant изменяет статус заявки на "Подана".
6. Applicant выполняет логирование действия подачи заявки.
7. Сервис добавляет заявку в архив Applications.
8. Система возвращает созданную заявку.
9. Заявка готова к процессу оценки экспертами.

Расширения 

3а. Ошибка при создании заявки.
1. `Система обнаруживает проблему при создании Application`
2. `Система возвращает ошибку "Не удалось создать заявку"`
3. `Операция прерывается`

5а. Ошибка при изменении статуса.
1. `Система не может изменить статус заявки`
2. `Статус остается "Черновик"`
3. `Система уведомляет об ошибке`
4. `Заявка не принимается к рассмотрению`

7а. Ошибка при сохранении в архив.
1. `Система не может добавить заявку в архив Applications`
2. `Сервис возвращает ошибку "Не удалось сохранить заявку"`
3. `Заявка считается неподанной`

Специальные требования

- Система должна гарантировать уникальность идентификатора заявки
- Статус заявки должен изменяться атомарно
- Логирование должно фиксировать факт подачи заявки
- Архив заявок должен сохранять целостность данных

Список технологий и типов данных
3a. Идентификатор заявки генерируется автоматически через Guid.NewGuid(). Связь с соискателем устанавливается через ApplicantId

5a. Статусы заявки: "Черновик" → "Подана" → "На проверке" → "Решение принято"


Частота использования: Постоянно в период подачи заявок.

Открытые вопросы

- Какие валидации данных должны выполняться при подаче заявки?
- Как должна восстанавливаться система при сбоях в процессе подачи заявки?
- Каковы сроки рассмотрения заявок и уведомления соискателей?